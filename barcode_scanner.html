<!DOCTYPE html>
<html>
<head>
  <title>HTML5 Barcode Scanner with Toggle</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
  <style>
    #scanner-container {
      display: none; /* Initially hidden */
      width: 300px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>Barcode Scanner</h1>
<button id="start-button">Start Scanning</button>
<div id="scanner-container"></div>
<script>
  const startButton = document.getElementById("start-button");
  const scannerContainer = document.getElementById("scanner-container");

  startButton.addEventListener("click", () => {
    scannerContainer.innerHTML = ""; // Clear scanner container
    scannerContainer.style.display = "block";

    const html5QrCode = new Html5Qrcode("scanner-container");
    html5QrCode.start(
      { facingMode: "environment" },
      { fps: 10, qrbox: 250 },
      (decodedText) => {
        alert(`Barcode detected: ${decodedText}`);
        html5QrCode.stop();
        scannerContainer.style.display = "none";
      },
      (errorMessage) => {
        console.warn(`Error: ${errorMessage}`);
      }
    ).catch((err) => console.error(`Unable to start scanning: ${err}`));
  });
</script>
</body>
</html>